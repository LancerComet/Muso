(()=>{"use strict";var t={590:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(81),o=i.n(n),r=i(645),a=i.n(r)()(o());a.push([t.id,"body {\n  margin: 0;\n}\n",""]);const s=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);n&&a[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),i&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=i):l[2]=i),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var r={},a=[],s=0;s<t.length;s++){var c=t[s],u=n.base?c[0]+n.base:c[0],l=r[u]||0,h="".concat(u," ").concat(l);r[u]=l+1;var f=i(h),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)e[f].references++,e[f].updater(g);else{var p=o(g,n);n.byIndex=s,e.splice(s,0,{identifier:h,updater:p,references:1})}a.push(h)}return a}function o(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,o){var r=n(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var s=i(r[a]);e[s].references--}for(var c=n(t,o),u=0;u<r.length;u++){var l=i(r[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}r=c}}},569:t=>{var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var o=void 0!==i.layer;o&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,o&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={id:n,exports:{}};return t[n](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nc=void 0,(()=>{var t,e,n;!function(t){t.Horizontal="horizontal",t.Vertical="vertical"}(t||(t={})),function(t){t.LTR="ltr",t.RTL="rtl"}(e||(e={})),function(t){t.Left="left",t.Right="right",t.Top="top",t.Bottom="bottom"}(n||(n={}));var o=new(function(){function t(){this._callbacks={}}return t.prototype.emit=function(t,e){var i=this._callbacks[t];if(i)for(var n=0,o=i;n<o.length;n++){var r=o[n];"function"==typeof r&&r(e)}},t.prototype.on=function(t,e){this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].indexOf(e)<0&&this._callbacks[t].push(e)},t.prototype.off=function(t,e){var i=this._callbacks[t];if(i){var n=i.indexOf(e);n>-1&&i.splice(n,1)}},t.prototype.destroy=function(){var t=this;Object.keys(this._callbacks).forEach((function(e){t._callbacks[e]=void 0})),this._callbacks={}},t}()),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},a=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout,s=function(){function t(){}return t.tick=function(t){return r(t)},t.stop=function(t){a(t)},t}(),c=new(function(){function t(){this._fps=60,this._frames=0,this._lastTs=Date.now(),this._isStarted=!1}return t.prototype.tick=function(){var t=this,e=Date.now();if(this._frames++,e>this._lastTs+20){var i=Math.round(1e3*this._frames/(e-this._lastTs));this._lastTs=e,this._frames=0,this._fps=i}this._isStarted&&s.tick((function(){return t.tick()}))},t.prototype.getFps=function(){return this._fps},t.prototype.start=function(){this._isStarted=!0,this.tick()},t.prototype.dispose=function(){this._isStarted=!1},t}());c.start();var u,l=function(){function t(){}return t.calcInsertion=function(t,e,i){var n=(e-t)/i;return new Array(i).fill(t).map((function(t,e){return parseFloat((t+n*e).toFixed(2))}))},t.calcLineLength=function(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))},t.calcCenterPoint=function(t,e,i,n){return{x:Math.min(t,i)+Math.abs(t-i)/2,y:Math.min(e,n)+Math.abs(e-n)/2}},t.calcFourPointsForImage=function(t,e,i,n){return{p0:[t,e],p1:[t+i,e],p2:[t+i,e+n],p3:[t,e+n]}},t.reflectTouchPointToImagePoint=function(t,e,i,n,o,r,a){void 0===a&&(a=1);var s=t-i,c=e-n;return{x:s,y:c,rx:s/(o*a),ry:c/(r*a)}},t.keepImageInCenter=function(t,e,i,n,o){return{x:t+i*(1-o),y:e+n*(1-o)}},t.toFixed=function(t,e){return void 0===e&&(e=6),parseFloat(t.toFixed(e))},t}(),h=function(){function t(t,e,i,n){this.cx=null,this.bx=null,this.ax=null,this.cy=null,this.by=null,this.ay=null,this.epsilon=1e-6,this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by}return t.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},t.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},t.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},t.prototype.solveCurveX=function(t){var e,i,n,o,r,a;for(n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<this.epsilon)return n;if(r=this.sampleCurveDerivativeX(n),Math.abs(r)<this.epsilon)break;n-=o/r}if((n=t)<(e=0))return e;if(n>(i=1))return i;for(;e<i;){if(o=this.sampleCurveX(n),Math.abs(o-t)<this.epsilon)return n;t>o?e=n:i=n,n=.5*(i-e)+e}return n},t.prototype.solve=function(t){return this.sampleCurveY(this.solveCurveX(t))},t}(),f=function(){function t(t,e,i,n,o){void 0===o&&(o=!1),this._bezier=null,this._fpsCompensate=!1,this._bezier=new h(t,e,i,n),this._fpsCompensate=o}return t.prototype.getPositionByTime=function(t){return this._bezier.solve(t)},t.prototype.createPositionsByStep=function(t,e,i){var n=this;return l.calcInsertion(0,1,i).map((function(t){return n.getPositionByTime(t)})).map((function(i){return t+(e-t)*i}))},t.prototype.tick=function(t,e,i,n){if(this._fpsCompensate){var o=Math.min(144,Math.max(c.getFps(),60))/60;i=Math.round(i*o)}var r=this.createPositionsByStep(t,e,i);r.push(e);var a=function(){r.length&&!n(r.shift(),!r.length)&&s.tick(a)};a()},t}(),g=function(){function t(){}return t.getScaleRatio=function(){var t;try{var e=document.createElement("canvas").getContext("2d"),i=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1);t=i>2?2:i}catch(e){t=1}return t},t}(),p=new f(.18,.83,.16,.99,!0),d=new f(.08,.94,.09,1,!0),m=new f(.14,.57,.47,.93,!1),v=g.getScaleRatio();!function(t){t.EnterDuoTouch="enter-double-touch",t.ImageLoadingFailure="image-loading-failure",t.LeaveDuoTouch="leave-double-touch",t.MouseWheel="mousewheel",t.ScrollingMode="scrolling-mode",t.Swipe="touch-swipe",t.TouchStart="touch-start",t.TouchMove="touch-move",t.TouchEnd="touch-end",t.TouchMoveX="touch-move-x",t.TouchMoveY="touch-move-y",t.Paging="paging",t.Resize="resize",t.Zooming="zooming",t.ZoomCenterMove="zoom-center-move"}(u||(u={}));var y=function(){function t(){}return t.setCanvasSize=function(t,e,i){t.width=e*v,t.height=i*v,t.style.width=e+"px",t.style.height=i+"px",t.getContext("2d").setTransform(v,0,0,v,0,0)},t.createCanvas=function(t,e){var i=document.createElement("canvas");return this.setCanvasSize(i,t,e),i},t}(),b=function(){function t(){}return t.sleep=function(t){return new Promise((function(e){setTimeout(e,t)}))},t}(),w=null,I=function(){function t(){}return t.nextTick=function(t){Promise.resolve().then((function(){"function"==typeof t&&t()}))},t.nextJob=function(t){return clearTimeout(w),w=setTimeout((function(){"function"==typeof t&&t()}),1)},t}(),P=new Image;P.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMjHxIGmVAAAAEklEQVQYV2P4//8/Bqa+4H8GAHjDSrb71GS0AAAAAElFTkSuQmCC";var x=function(){function e(t){this.stage=null,this.image=P,this.inLoading=!1,this.isLoaded=!1,this._rawX=0,this._x=null,this._rawY=0,this._y=0,this.originalWidth=0,this.originalHeight=0,this.stage=t.stage,this.url=t.url}return Object.defineProperty(e.prototype,"placeholder",{get:function(){return this.stage.option.placeholder||P},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),e.prototype.updatePosition=function(e,i){e&&(this._rawX=e.x*v,this._rawY=e.y*v,null===this.x&&(this._x=this._rawX),null===this.y&&(this._y=this._rawY),i||this.stage.scrollingMode===t.Vertical&&!this.stage.inSetScrollingMode||!this.isLoaded?(this._x=this._rawX,this._y=this._rawY):this.tickPosition())},Object.defineProperty(e.prototype,"size",{get:function(){var t=this.stage.option,e=t.minWidth,i=t.maxWidth,n=t.minHeight,o=t.maxHeight,r=i(),a=o(),s=e(),c=n(),u=this.isLoaded?this.originalWidth/this.originalHeight:this.placeholder.width/this.placeholder.height,l=this.isLoaded?this.originalWidth:this.placeholder.width;r>0&&l>r&&(l=r),s>0&&l<s&&(l=s);var h=l/u;return a>0&&h>a&&(h=a),c>0&&h<c&&(h=c),{width:l=h*u,height:h}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positionX",{get:function(){return(this.stage.canvasRect.width-this.size.width)/2*v},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positionY",{get:function(){return(this.stage.canvasRect.height-this.size.height)/2*v},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.stage.stageImages.indexOf(this)},enumerable:!1,configurable:!0}),e.prototype.tickPosition=function(){var t=this,e=this._x,i=this._rawX,n=p.createPositionsByStep(e,i,30),o=this._y,r=this._rawY,a=p.createPositionsByStep(o,r,30),c=function(){t._x=n.shift(),t._y=a.shift(),(n.length||a.length)&&s.tick((function(){return c()}))};c()},e.prototype.load=function(){var t=this;return new Promise((function(e,i){return n=t,o=void 0,a=function(){var t,n,o,r,a,s=this;return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(c){switch(c.label){case 0:if(this.isLoaded||this.inLoading)return[3,5];if(this.inLoading=!0,t=setTimeout((function(){i(new Error("Image loading timeout"))}),this.stage.option.imageTimeout),n=new Image,"function"!=typeof(o=this.stage.option.beforeImageLoad))return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),r=this,[4,o(this.url)];case 2:return r.url=c.sent(),[3,4];case 3:return a=c.sent(),[2,i(a)];case 4:return n.onload=function(){clearTimeout(t),s.originalWidth=n.width,s.originalHeight=n.height,s.inLoading=!1,s.isLoaded=!0,s.image=n,e()},n.onerror=function(e){clearTimeout(t),s.inLoading=!1,i(e)},n.src=this.url,[3,6];case 5:e(),c.label=6;case 6:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function i(t){try{c(a.next(t))}catch(t){e(t)}}function s(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(i,s)}c((a=a.apply(n,o||[])).next())}));var n,o,r,a}))},e.prototype.reload=function(){return this.isLoaded=!1,this.load()},e.prototype.destroy=function(){this.stage=null},e}(),T=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{c(n.next(t))}catch(t){r(t)}}function s(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},S=function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},M=function(){function e(t){this.stage=null,this.stageImages=[],this.stage=t}return e.prototype.addImage=function(t){var e=new x({url:t,stage:this.stage});return this.stageImages.push(e),this.stageImages.length-1},e.prototype.prependImage=function(t){var e=new x({url:t,stage:this.stage});return this.stageImages=[e].concat(this.stageImages),0},e.prototype.removeImage=function(t){this.stageImages.splice(t,1)},e.prototype.autoLoadImages=function(e){return T(this,void 0,void 0,(function(){var i,n,r,a,s;return S(this,(function(c){switch(c.label){case 0:i=this.stage.currentPageIndex,this.stage.scrollingMode,t.Vertical,n=i,r=i+e,c.label=1;case 1:if(!(n<r))return[3,6];if(!(a=this.stageImages[n]))return[3,5];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.load()];case 3:return c.sent(),[3,5];case 4:return s=c.sent(),console.error("[Muso] Failed to load image ".concat(a.url,":"),s),o.emit(u.ImageLoadingFailure,this),[3,5];case 5:return n++,[3,1];case 6:return[2]}}))}))},e.prototype.loadImage=function(t){return T(this,void 0,void 0,(function(){var e,i;return S(this,(function(n){switch(n.label){case 0:if(t<0||t>=this.stageImages.length)return[2];if(!(e=this.stageImages[t]))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.load()];case 2:return n.sent(),[3,4];case 3:return i=n.sent(),console.error("[Muso] Failed to load image ".concat(e.url,":"),i),o.emit(u.ImageLoadingFailure,this),[3,4];case 4:return[2]}}))}))},e.prototype.destroy=function(){this.stage=null,this.stageImages.forEach((function(t){return t.destroy()})),this.stageImages=[]},e}(),C=function(){function e(t){this.stage=null,this.enabled=!1,this.stage=t,this.onResize=this.onResize.bind(this),window.addEventListener("resize",this.onResize)}return e.prototype.onResize=function(e){return i=this,n=void 0,a=function(){return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(i){switch(i.label){case 0:return this.enabled?(this.stage.setCanvasSize(),[4,this.stage.updateAllImagesPosition()]):[3,2];case 1:i.sent(),this.stage.scrollingMode===t.Vertical&&this.stage.setVerticalQueueOffsetByPage(),o.emit(u.Resize,e),i.label=2;case 2:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function o(t){try{c(a.next(t))}catch(t){e(t)}}function s(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(o,s)}c((a=a.apply(i,n||[])).next())}));var i,n,r,a},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.destroy=function(){window.removeEventListener(u.Resize,this.onResize),this.onResize=null},e}(),O=function(){function i(t){this.stage=null,this.touchId=0,this.currentTouchId=0,this.touchStartTs=null,this.touchList=null,this.touchDirectionX=null,this.touchDirectionY=null,this.p1={x:null,y:null,startX:null,startY:null,ts:0},this.p2={x:null,y:null,startX:null,startY:null,ts:0},this._touchMoveX=0,this._touchMoveY=0,this.touchSpeedX={value:0,touchId:null},this.touchSpeedY={value:0,touchId:null},this.startRawScale=null,this._rawScale=1,this.stopScaleTicking=!1,this.stopScaleTickingTimer=null,this._centerX=0,this._centerY=0,this.startCenterX=null,this.startCenterY=null,this.lastCenterX=null,this.lastCenterY=null,this._rawCenterX=0,this._rawCenterY=0,this.holds=!1,this.stage=t,t.option.noDefaultControl||(this.initTouchEvents(),this.initStageControl())}return Object.defineProperty(i.prototype,"stageCanvas",{get:function(){return this.stage.canvas},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stageOption",{get:function(){return this.stage.option},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"inTouch",{get:function(){return this.touchList&&this.touchList.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"touchPointCount",{get:function(){return this.touchList?this.touchList.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDuoTouch",{get:function(){return 2===this.touchPointCount},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"p1DeltaX",{get:function(){return null===this.p1.x?0:this.p1.x-this.p1.startX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"p1DeltaY",{get:function(){return null===this.p1.y?0:this.p1.y-this.p1.startY},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"p2DeltaX",{get:function(){return null===this.p2.x?0:this.p2.x-this.p2.startX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"p2DeltaY",{get:function(){return null===this.p2.y?0:this.p2.y-this.p2.startY},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"touchMoveX",{get:function(){return this._touchMoveX},set:function(t){if(this._touchMoveX=t,this.inTouch&&(this.touchDirectionX=t>this._touchMoveX?n.Right:n.Left),o.emit(u.TouchMoveX,t),!this.isDuoTouch&&this.isHorizontalMode&&(1===this.stage.displayScale&&(this.stage.touchMoveX=t),this.stage.displayScale>1&&this.currentTouchId===this.touchId)){var e=this.lastCenterX+-t*(1/this.stage.displayScale)*v*this.stageOption.zoomTouchMoveAcc;e>0&&e<this.stage.canvasLogicWidth&&(this.rawCenterX=e)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"touchMoveY",{get:function(){return this._touchMoveY},set:function(t){if(this.inTouch&&(this.touchDirectionY=t>this._touchMoveY?n.Bottom:n.Top),this._touchMoveY=t,o.emit(u.TouchMoveY,t),!this.isDuoTouch&&this.isHorizontalMode)if(1!==this.stage.displayScale){if(this.stage.displayScale>1&&this.currentTouchId===this.touchId){var e=this.lastCenterY+-t*(1/this.stage.displayScale)*v*this.stageOption.zoomTouchMoveAcc;e>0&&e<this.stage.canvasLogicHeight&&(this.rawCenterY=e)}}else this.stage.touchMoveY=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rawScale",{get:function(){return this._rawScale},set:function(t){var e=this;this._rawScale=t;var i=this.stage;d.tick(i.displayScale,t,50,(function(t){if(e.stopScaleTicking)return e.resetStopScaleTicking(),!0;i.displayScale=t,o.emit(u.Zooming,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isHorizontalMode",{get:function(){return this.stageOption.scrollingMode===t.Horizontal},enumerable:!1,configurable:!0}),i.prototype.resetStopScaleTicking=function(){var t=this;clearTimeout(this.stopScaleTickingTimer),this.stopScaleTickingTimer=setTimeout((function(){t.stopScaleTicking=!1}),10)},Object.defineProperty(i.prototype,"centerX",{get:function(){return this._centerX},set:function(t){this._centerX=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"centerY",{get:function(){return this._centerY},set:function(t){this._centerY=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rawCenterX",{get:function(){return this._rawCenterX},set:function(t){var e=this;this._rawCenterX=t,p.tick(this.centerX,t,20,(function(t){e.centerX=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rawCenterY",{get:function(){return this._rawCenterY},set:function(t){var e=this;this._rawCenterY=t,p.tick(this.centerY,t,20,(function(t){e.centerY=t}))},enumerable:!1,configurable:!0}),i.prototype.onTouchStart=function(t){if(t.preventDefault(),this.stage.isTouchDisabled)this.holds=!0;else{if(this.touchList=t.touches,null===this.touchStartTs&&(this.touchStartTs=Date.now()),this.touchPointCount>0){var e=t.touches[0];if(this.p1.startX=e.clientX,this.p1.startY=e.clientY,this.p1.ts=Date.now(),2===this.touchPointCount){var i=t.touches[1];this.p2.startX=i.clientX,this.p2.startY=i.clientY,this.p2.ts=Date.now(),null===this.startRawScale&&(this.startRawScale=this.rawScale),o.emit(u.EnterDuoTouch,t)}}this.currentTouchId=this.touchId,o.emit(u.TouchStart,t)}},i.prototype.onTouchMove=function(t){if(t.preventDefault(),!this.stage.isTouchDisabled&&!this.holds){var e=t.touches[0];if(this.p1.x=e.clientX,this.p1.y=e.clientY,Math.abs(this.p1DeltaX)>10&&(this.touchMoveX=this.p1DeltaX),Math.abs(this.p1DeltaY)>10&&(this.touchMoveY=this.p1DeltaY),this.isDuoTouch&&this.isHorizontalMode){var i=t.touches[1];this.p2.x=i.clientX,this.p2.y=i.clientY;var n=l.calcCenterPoint(e.clientX,e.clientY,i.clientX,i.clientY),r=n.x,a=n.y;null===this.startCenterX&&(this.startCenterX=r),null===this.startCenterY&&(this.startCenterY=a),this.stage.displayScale>=1?(this.rawCenterX=this.stage.canvasLogicWidth-r,this.rawCenterY=this.stage.canvasLogicHeight-a):(this.rawCenterX=r,this.rawCenterY=a);var s=l.calcLineLength(e.clientX,e.clientY,i.clientX,i.clientY)/l.calcLineLength(this.p1.startX,this.p1.startY,this.p2.startX,this.p2.startY),c=this.startRawScale*s;c<.3?c=.3:c>5&&(c=5),Math.abs(c-this.rawScale)>.1&&(this.rawScale=c);var h=r-this.startCenterX,f=a-this.startCenterY;o.emit(u.ZoomCenterMove,{position:[this.centerX,this.centerY],delta:[h,f]})}o.emit(u.TouchMove,t)}},i.prototype.onTouchEnd=function(t){if(t.preventDefault(),!this.stage.isTouchDisabled){this.holds&&(this.holds=!1),this.touchList=t.touches;var e=Date.now()-this.touchStartTs;this.touchSpeedX.value=(this.p1.x-this.p1.startX)/e,this.touchSpeedY.value=(this.p1.y-this.p1.startY)/e,this.touchSpeedX.touchId=this.touchId,this.touchSpeedY.touchId=this.touchId,this.startCenterX=null,this.startCenterY=null,this.lastCenterX=this.centerX,this.lastCenterY=this.centerY,this.startRawScale=null,this.touchStartTs=null,this.touchId++,this.isDuoTouch||o.emit(u.LeaveDuoTouch,t),this.inTouch||o.emit(u.TouchEnd,t),this.p1.x=null,this.p1.startX=null,this.p1.y=null,this.p1.startY=null,this.p2.x=null,this.p2.startX=null,this.p2.y=null,this.p2.startY=null}},i.prototype.onMouseWheel=function(t){return e=this,i=void 0,r=function(){return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){return this.isHorizontalMode||o.emit(u.MouseWheel,-t.deltaY),[2]}))},new((n=void 0)||(n=Promise))((function(t,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(a,s)}c((r=r.apply(e,i||[])).next())}));var e,i,n,r},i.prototype.initTouchEvents=function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseWheel=this.onMouseWheel.bind(this);var t=this.stageCanvas;t.addEventListener("touchstart",this.onTouchStart),t.addEventListener("touchmove",this.onTouchMove),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchcancel",this.onTouchEnd),t.addEventListener("mousewheel",this.onMouseWheel)},i.prototype.initStageControl=function(){var t=this,i=this.stage,r=i.option.restoreScaleRate,a=function(){p.tick(t.touchMoveX,0,30,(function(e){t.inTouch||(t.touchMoveX=e)})),p.tick(t.touchMoveY,0,30,(function(e){t.touchMoveY=e}))};o.on(u.Swipe,(function(o){if(t.isHorizontalMode){var r=i.option.horizontalDirection===e.RTL;switch(o){case n.Right:r?i.goNextPage():i.goPrevPage();break;case n.Left:r?i.goPrevPage():i.goNextPage()}}}));var s=null,c=0,l=null,h=function(e){if(!t.isHorizontalMode){var n=e.deltaY,o=e.lastQueueOffsetForVertical,r=e.newQueueOffsetY;if(r>0){var a=.5*r;return t.stage.queueOffsetForVertical=a,p.tick(a,0,30,(function(e){t.inTouch||(t.stage.queueOffsetForVertical=e)}))}if(r-o<0){var s=i.getImagesHeightByRange(0,i.stageImages.length-1)-i.canvasLogicHeight,c=o+.5*n;if(Math.abs(c)>s)return t.stage.queueOffsetForVertical=c,p.tick(c,-s,30,(function(e){t.inTouch||(t.stage.queueOffsetForVertical=e)}));if(Math.abs(r)>s)return void(t.stage.queueOffsetForVertical=-s)}t.stage.queueOffsetForVertical=r,t.stage.syncPageByVerticalQueueOffset(),null===l&&(l=Date.now())}};o.on(u.TouchMoveY,(function(e){t.isHorizontalMode||(null===s&&(s=t.stage.queueOffsetForVertical),c=s+e*t.stage.option.vTouchMoveAcc,h({deltaY:e,newQueueOffsetY:c,lastQueueOffsetForVertical:s}))})),o.on(u.MouseWheel,(function(e){if(!t.isHorizontalMode){var i=t.stage.queueOffsetForVertical,n=t.stage.queueOffsetForVertical+e*t.stage.option.vTouchMoveAcc;h({deltaY:e,newQueueOffsetY:n,lastQueueOffsetForVertical:i})}})),o.on(u.TouchEnd,(function(){if(!t.isHorizontalMode){var e=c<s;return o.emit(u.Swipe,e?n.Top:n.Bottom),s=null,void(c=0)}var l=t.stage.displayScale;if(1===l){var h=t.stageOption.swipeDistanceOfPaging;t.p1DeltaX<0&&-1*t.p1DeltaX>h?o.emit(u.Swipe,n.Left):t.p1DeltaX>h&&o.emit(u.Swipe,n.Right),a()}else l<r&&(t.stopScaleTicking=!0,p.tick(i.displayScale,1,30,(function(e){i.displayScale=e,t._rawScale=e})),a(),p.tick(t.rawCenterX,i.canvasLogicWidth/2,30,(function(e){t.rawCenterX=e})),p.tick(t.rawCenterY,i.canvasLogicHeight/2,30,(function(e){t.rawCenterY=e})))})),o.on(u.Swipe,(function(e){if(e===n.Bottom||e===n.Top){var o=Date.now()-l;if(o>220)l=null;else{var r=t.touchId,a=c-s,u=t.p1DeltaY/o,h=c+a*Math.abs(u)*v,f=i.stageImages.length;m.tick(c,h,100,(function(o){if(t.inTouch||r!==t.touchId||i.inSetScrollingMode)return!0;if(o>0)return t.stage.queueOffsetForVertical=0,t.stage.syncPageByVerticalQueueOffset(),!0;var a=i.currentPageIndex>=f-1;if(e===n.Top&&a){var s=i.getImagesHeightByRange(0,i.stageImages.length-1)-i.canvasLogicHeight;if(Math.abs(o)>s)return t.stage.queueOffsetForVertical=-s,t.stage.syncPageByVerticalQueueOffset(),!0}t.stage.queueOffsetForVertical=o,t.stage.syncPageByVerticalQueueOffset()})),l=null}}}))},i.prototype.destroy=function(){var t=this.stageCanvas;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchEnd),t.removeEventListener("scroll",this.onMouseWheel),this.stage=null},i}(),z=function(){function t(){this._rafId=null,this._isEnabled=!1,this._callbacks=[]}return t.prototype._execCallbacks=function(){for(var t=0,e=this._callbacks;t<e.length;t++){var i=e[t];"function"==typeof i&&i()}},t.prototype._tick=function(){var t=this;this._execCallbacks(),this._isEnabled&&(this._rafId=s.tick((function(){return t._tick()})))},t.prototype.start=function(){this._isEnabled=!0,this._tick()},t.prototype.stop=function(){this._isEnabled=!1},t.prototype.on=function(t){this._callbacks.indexOf(t)<0&&this._callbacks.push(t)},t.prototype.off=function(t){var e=this._callbacks.indexOf(t);e>-1&&this._callbacks.splice(e,1)},t.prototype.destroy=function(){this.stop(),this._callbacks=[]},t}(),k=function(t,e,i,n){return new(i||(i=Promise))((function(o,r){function a(t){try{c(n.next(t))}catch(t){r(t)}}function s(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},_=function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},L=function(){function i(t,e,i){this.option=null,this._canvas=null,this._context=null,this.muso=null,this.originalPlaceHolder=null,this.stopDrawing=!1,this.resizer=new C(this),this.stageIO=new M(this),this.currentPageIndex=0,this.inPaging=!1,this.pagingTimer=null,this.inSetScrollingMode=!1,this.displayScale=1,this.imageX=0,this.imageY=0,this.imageWidth=0,this.imageHeight=0,this.queueOffsetForHorizontal=0,this.queueOffsetForVertical=0,this.ticker=null,this.swiper=null,this.touchMoveX=0,this.touchMoveY=0,this.isTouchDisabled=!1,this.muso=t,this.option=e,this.originalPlaceHolder=e.placeholder,this.initCanvas(i),this.initPlaceHolder(),this.setCanvasSize(),this.initSwiper(),this.initTicker()}return Object.defineProperty(i.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canvasLogicWidth",{get:function(){return this.canvas.width/v},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canvasLogicHeight",{get:function(){return this.canvas.height/v},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canvasRect",{get:function(){return this.canvas.parentElement.getBoundingClientRect()},enumerable:!1,configurable:!0}),i.prototype.setCanvasSize=function(){var t=this._canvas,e=this.canvasRect,i=e.width,n=e.height;t.width=i*v,t.height=n*v,t.style.width=i+"px",t.style.height=n+"px"},i.prototype.enableResizing=function(){this.resizer.enable()},i.prototype.disableResizing=function(){this.resizer.disable()},Object.defineProperty(i.prototype,"stageImages",{get:function(){return this.stageIO.stageImages},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentImage",{get:function(){return this.stageImages[this.currentPageIndex]},enumerable:!1,configurable:!0}),i.prototype.autoLoadImages=function(){return k(this,void 0,void 0,(function(){return _(this,(function(t){switch(t.label){case 0:return[4,this.stageIO.autoLoadImages(4)];case 1:return[2,t.sent()]}}))}))},i.prototype.addImage=function(t){var e=this,i=this.stageIO.addImage(t);return i<this.currentPageIndex+this.option.renderingImageCount&&this.stageIO.loadImage(i).then((function(){e.updateAllImagesPosition({noBezier:!0})})),i},i.prototype.prependImage=function(e){var i=this,n=this.stageIO.prependImage(e);return this.currentPageIndex++,this.currentPageIndex-n<this.option.renderingImageCount&&this.stageIO.loadImage(n).then((function(){i.scrollingMode===t.Vertical&&i.setVerticalQueueOffsetByPage({noBezier:!0}),I.nextJob((function(){i.updateAllImagesPosition({noBezier:!0})}))})),n},i.prototype.removeImage=function(t){this.stageIO.removeImage(t),this.updateAllImagesPosition()},i.prototype.reload=function(t){var e=this.stageImages[t];e&&e.reload()},Object.defineProperty(i.prototype,"scrollingMode",{get:function(){return this.option.scrollingMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isHorizontalRTL",{get:function(){return this.option.horizontalDirection===e.RTL},enumerable:!1,configurable:!0}),i.prototype.goPrevPage=function(){this.goTargetPage(this.currentPageIndex-1)},i.prototype.goNextPage=function(){this.goTargetPage(this.currentPageIndex+1)},i.prototype.goTargetPage=function(e){return k(this,void 0,void 0,(function(){var i=this;return _(this,(function(n){switch(n.label){case 0:return e>-1&&e<this.stageImages.length?(this.inPaging=!0,this.currentPageIndex=e,o.emit(u.Paging,this.currentPageIndex),this.setQueueOffset(),[4,this.autoLoadImages()]):[3,3];case 1:return n.sent(),[4,this.updateAllImagesPosition()];case 2:n.sent(),this.scrollingMode===t.Vertical&&this.setVerticalQueueOffsetByPage(),clearTimeout(this.pagingTimer),this.pagingTimer=setTimeout((function(){i.inPaging=!1}),500),n.label=3;case 3:return[2]}}))}))},i.prototype.syncPageByVerticalQueueOffset=function(){return k(this,void 0,void 0,(function(){var e,i,n,r;return _(this,(function(a){switch(a.label){case 0:if(this.scrollingMode!==t.Vertical)return[2];for(e=0,i=0,n=this.stageImages.length;i<n&&!(e>this.currentPageIndex+this.option.renderingImageCount);i++)(r=this.stageImages[i])&&r.y/v+this.queueOffsetForVertical<.8*this.canvasLogicHeight&&i>e&&(e=i);return this.currentPageIndex=e,[4,this.autoLoadImages()];case 1:return a.sent(),[4,this.updateAllImagesPosition()];case 2:return a.sent(),o.emit(u.Paging,this.currentPageIndex),[2]}}))}))},i.prototype.setHorizontalDirection=function(t){return k(this,void 0,void 0,(function(){return _(this,(function(e){switch(e.label){case 0:return this.option.horizontalDirection=t,[4,this.updateAllImagesPosition()];case 1:return e.sent(),[2]}}))}))},i.prototype.setScrollingMode=function(e){return k(this,void 0,void 0,(function(){var i=this;return _(this,(function(n){switch(n.label){case 0:return this.inSetScrollingMode||this.scrollingMode===e||this.inPaging?[2]:(this.inSetScrollingMode=!0,this.option.scrollingMode=e,[4,this.updateAllImagesPosition()]);case 1:return n.sent(),e!==t.Vertical?[3,3]:[4,b.sleep(500)];case 2:n.sent(),n.label=3;case 3:return this.setQueueOffset(),[4,this.autoLoadImages()];case 4:return n.sent(),[4,this.updateAllImagesPosition()];case 5:return n.sent(),o.emit(u.Paging,this.currentPageIndex),o.emit(u.ScrollingMode,e),this.inSetScrollingMode=!1,setTimeout((function(){return i.updateAllImagesPosition()}),1),[2]}}))}))},Object.defineProperty(i.prototype,"imageLogicalWidth",{get:function(){return this.currentImage.size.width*this.displayScale},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"imageLogicalHeight",{get:function(){return this.currentImage.size.height*this.displayScale},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zoomCenterX",{get:function(){return this.swiper.centerX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zoomCenterY",{get:function(){return this.swiper.centerY},enumerable:!1,configurable:!0}),i.prototype.calcPositionData=function(){return k(this,void 0,void 0,(function(){var e,i,n,o,r,a,s;return _(this,(function(c){if(e=[],!(i=this.stageImages).length)return[2,e];for(n=0,o=this.stageImages.length;n<o;n++){switch(r=i[n],a=0,s=0,this.scrollingMode){case t.Horizontal:this.isHorizontalRTL?(a-=r.size.width,a-=this.getImagesWidthBefore(n)):a=this.getImagesWidthBefore(n);break;case t.Vertical:s+=this.getImagesHeightBefore(n)}e.push({x:a,y:s})}return[2,e]}))}))},i.prototype.setQueueOffset=function(e){void 0===e&&(e={});var i=e.noBezier;this.scrollingMode===t.Horizontal&&(this.setHorizontalQueueOffsetByPage({noBezier:i}),this.setVerticalQueueOffsetByPage({noBezier:i}))},i.prototype.setHorizontalQueueOffsetByPage=function(t){var e=this;void 0===t&&(t={});var i=t.noBezier,n=0;this.isHorizontalRTL?(n=this.getImagesWidthBefore(this.currentPageIndex+1),n+=this.currentImage.positionX/v):n=this.getImagesWidthBefore(this.currentPageIndex),i?this.queueOffsetForHorizontal=n:p.tick(this.queueOffsetForHorizontal,n,30,(function(t){e.queueOffsetForHorizontal=t}))},i.prototype.setVerticalQueueOffsetByPage=function(t){var e=this;void 0===t&&(t={});var i=t.noBezier,n=-this.getImagesHeightBefore(this.currentPageIndex);i?this.queueOffsetForVertical=n:p.tick(this.queueOffsetForVertical,n,30,(function(t){e.queueOffsetForVertical=t}))},i.prototype.updateAllImagesPosition=function(t){return void 0===t&&(t={}),k(this,void 0,void 0,(function(){var e,i,n,o,r,a;return _(this,(function(s){switch(s.label){case 0:return e=t.noBezier,[4,this.calcPositionData()];case 1:for(i=s.sent(),n=0,o=this.stageImages.length;n<o;n++)r=this.stageImages[n],a=i[n],r&&a&&r.updatePosition(a,e);return this.setQueueOffset({noBezier:e}),[2]}}))}))},i.prototype.getImagesWidthBefore=function(t){return this.getImagesWidthByRange(0,t-1)},i.prototype.getImagesHeightBefore=function(t){return this.getImagesHeightByRange(0,t-1)},i.prototype.getImagesWidthByRange=function(t,e){for(var i=0,n=t;n<=e;n++)i+=this.stageImages[n].size.width;return i},i.prototype.getImagesHeightByRange=function(t,e){for(var i=0,n=t;n<=e;n++)i+=this.stageImages[n].size.height;return i},i.prototype.initCanvas=function(t){this._canvas=t,this._context=t.getContext("2d");var e=this.canvasRect,i=e.width,n=e.height;y.setCanvasSize(t,i,n),t.className="muso-stage",t.style.padding=this.option.stagePadding+"px",t.style.backgroundColor=this.option.stageColor,t.style.boxSizing="border-box"},i.prototype.initPlaceHolder=function(){var t=this.originalPlaceHolder;if(t){var e=y.createCanvas(this.canvasLogicWidth,this.canvasLogicHeight),i=e.getContext("2d");this.option.stageColor&&(i.fillStyle=this.option.stageColor,i.fillRect(0,0,e.width,e.height));var n=(this.canvasLogicWidth-t.width)/2,o=(this.canvasLogicHeight-t.height)/2;i.drawImage(t,n,o),this.option.placeholder=e}},i.prototype.initTicker=function(){var t=this,e=new z;e.on((function(){t.stopDrawing||(t.clearStage(),t.drawImages())})),e.start(),this.ticker=e},i.prototype.clearStage=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height)},i.prototype.drawImages=function(){for(var t=0,e=this.stageImages.length;t<e;t++)t!==this.currentPageIndex&&this.drawSingleImage({index:t,alpha:this.option.otherPageAlpha()});this.drawSingleImage({index:this.currentPageIndex,alpha:1,isCurrentImage:!0,scale:this.displayScale})},i.prototype.drawSingleImage=function(e){e.scale=e.scale||1;var i=this.stageImages[e.index];if(i){this.context.globalAlpha=e.alpha;var n=i.x,o=i.y,r=i.size.width*v*e.scale,a=i.size.height*v*e.scale;switch(this.scrollingMode){case t.Horizontal:var s=this.isHorizontalRTL?0:this.currentImage.positionX;n+=this.queueOffsetForHorizontal*v*(this.isHorizontalRTL?1:-1),n+=this.touchMoveX*v+s,o+=(this.canvasLogicHeight-i.size.height)/2*v;break;case t.Vertical:o+=this.queueOffsetForVertical*v,n+=(this.canvasLogicWidth-i.size.width)/2*v}if(e.isCurrentImage&&1!==this.displayScale){n+=i.size.width*(1-this.displayScale),o+=i.size.height*(1-this.displayScale);var c=this.zoomCenterX-this.canvasLogicWidth/2,u=this.zoomCenterY-this.canvasLogicHeight/2,l=this.displayScale-1;n+=-c*l*v,o+=-u*l*v}this.imageX=n,this.imageY=o,this.imageWidth=r,this.imageHeight=a,this._context.drawImage(i.isLoaded?i.image:i.placeholder,Math.floor(n),Math.floor(o),Math.floor(r),Math.floor(a)),this.context.globalAlpha=1}},Object.defineProperty(i.prototype,"touchPointCount",{get:function(){return this.swiper.touchPointCount},enumerable:!1,configurable:!0}),i.prototype.initSwiper=function(){this.swiper=new O(this)},i.prototype.destroy=function(){this.resizer.destroy(),this.stageIO.destroy(),this.swiper.destroy(),this.ticker.stop();var t=this._canvas;t.parentElement.removeChild(t)},i}(),A=function(){function i(i){void 0===i&&(i={});var n=this;this.option=Object.create(null),this.stage=null,this.option.autoResizing="boolean"!=typeof i.autoResizing||i.autoResizing,this.option.stagePadding=i.stagePadding||0,this.option.stageColor=i.stageColor||"#222",this.option.swipeDistanceOfPaging=i.swipeDistanceOfPaging||50,this.option.renderingImageCount=i.renderingImageCount||5,this.option.horizontalDirection=i.horizontalDirection||e.LTR,this.option.maxWidth=i.maxWidth||function(){var t;return null!==(t=n.stage.canvas.offsetWidth)&&void 0!==t?t:0},this.option.minWidth=i.minWidth||function(){return 0},this.option.maxHeight=i.maxHeight||function(){var t;return null!==(t=n.stage.canvas.offsetHeight)&&void 0!==t?t:0},this.option.minHeight=i.minHeight||function(){return 0},this.option.restoreScaleRate=i.restoreScaleRate||1.3,this.option.scrollingMode=i.scrollingMode||t.Horizontal,this.option.noDefaultControl=i.noDefaultControl||!1,this.option.beforeImageLoad=i.beforeImageLoad||null,this.option.vTouchMoveAcc=i.vTouchMoveAcc||1.35,this.option.zoomTouchMoveAcc=i.zoomTouchMoveAcc||1.05,this.option.placeholder=i.placeholder||null,this.option.imageTimeout=i.imageTimeout||5e3,this.option.otherPageAlpha=i.otherPageAlpha||function(){return 1}}return Object.defineProperty(i.prototype,"swiper",{get:function(){return this.stage.swiper},enumerable:!1,configurable:!0}),i.prototype.mount=function(t){var e=new L(this,this.option,t);this.option.autoResizing&&e.enableResizing(),this.stage=e},i.prototype.destroy=function(){o.destroy(),this.stage.destroy(),this.stage=null,this.option=null},i.prototype.setScrollingMode=function(t){this.stage.setScrollingMode(t)},i.prototype.addImage=function(t){return this.stage.addImage(t)},i.prototype.prependImage=function(t){return this.stage.prependImage(t)},i.prototype.removeImage=function(t){this.stage.removeImage(t)},i.prototype.reload=function(t){this.stage.reload(t)},i.prototype.goPrevPage=function(){this.stage.goPrevPage()},i.prototype.goNextPage=function(){this.stage.goNextPage()},i.prototype.goTargetPage=function(t){this.stage.goTargetPage(t)},i.prototype.setHorizontalDirection=function(t){return this.stage.setHorizontalDirection(t)},i.prototype.on=function(t,e){o.on(t,e)},i.prototype.off=function(t,e){o.off(t,e)},i}(),Y=i(379),X=i.n(Y),H=i(795),R=i.n(H),E=i(569),D=i.n(E),B=i(565),j=i.n(B),V=i(216),F=i.n(V),W=i(589),q=i.n(W),Q=i(590),N={};N.styleTagTransform=q(),N.setAttributes=j(),N.insert=D().bind(null,"head"),N.domAPI=R(),N.insertStyleElement=F(),X()(Q.Z,N),Q.Z&&Q.Z.locals&&Q.Z.locals;var Z,G,U=["https://static.lancercomet.com/lancercomet/misc/MusoImages/001.png?imageView2/2/format/jpg","https://static.lancercomet.com/lancercomet/misc/MusoImages/002.png?imageView2/2/format/jpg","https://static.lancercomet.com/lancercomet/misc/MusoImages/003.png?imageView2/2/format/jpg","https://static.lancercomet.com/lancercomet/misc/MusoImages/004.png?imageView2/2/format/jpg","https://static.lancercomet.com/lancercomet/misc/MusoImages/005.png?imageView2/2/format/jpg","https://static.lancercomet.com/lancercomet/misc/MusoImages/006.png?imageView2/2/format/jpg","https://static.lancercomet.com/lancercomet/misc/MusoImages/007.png?imageView2/2/format/jpg","https://static.lancercomet.com/lancercomet/misc/MusoImages/008.png?imageView2/2/format/jpg"];G=function(){var i,n,o,r;return function(t,e){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(t){var e=new Image;e.onload=function(){return t(e)},e.src="logo.png"}))];case 1:return i=a.sent(),n=t.Horizontal,(o=new A({scrollingMode:n,renderingImageCount:5,stageColor:"#111",placeholder:i,otherPageAlpha:function(){return n===t.Vertical?1:.3}})).on(u.TouchStart,(function(){console.log("Touch start")})),o.on(u.Swipe,(function(t){console.log("Swipe:",t)})),o.on(u.ScrollingMode,(function(t){console.log("Scrolling mode changed:",t),n=t})),o.on(u.Paging,(function(t){console.log("Paging:",t)})),o.on(u.ImageLoadingFailure,(function(t){console.error("Image load failure:",t)})),r=document.querySelector("#muso"),o.mount(r),U.forEach((function(t){return o.addImage(t)})),document.getElementById("prev-btn").addEventListener("click",(function(){return o.goPrevPage()})),document.getElementById("next-btn").addEventListener("click",(function(){return o.goNextPage()})),document.getElementById("rtl-btn").addEventListener("click",(function(){o.setScrollingMode(t.Horizontal),o.setHorizontalDirection(e.RTL)})),document.getElementById("ltr-btn").addEventListener("click",(function(){o.setScrollingMode(t.Horizontal),o.setHorizontalDirection(e.LTR)})),document.getElementById("vertical-btn").addEventListener("click",(function(){o.setScrollingMode(t.Vertical)})),window.addEventListener("keyup",(function(t){var e=t.key;"ArrowLeft"===e?o.goPrevPage():"ArrowRight"===e?o.goNextPage():"Home"===e?o.goTargetPage(0):"End"===e&&o.goTargetPage(U.length-1)})),window.addEventListener("wheel",(function(t){t.deltaY>0?o.goNextPage():o.goPrevPage()})),[2]}}))},new((Z=void 0)||(Z=Promise))((function(t,e){function i(t){try{o(G.next(t))}catch(t){e(t)}}function n(t){try{o(G.throw(t))}catch(t){e(t)}}function o(e){var o;e.done?t(e.value):(o=e.value,o instanceof Z?o:new Z((function(t){t(o)}))).then(i,n)}o((G=G.apply(void 0,[])).next())}))})()})();