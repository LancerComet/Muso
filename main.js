(()=>{"use strict";var t={590:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(81),o=n.n(i),r=n(645),a=n.n(r)()(o());a.push([t.id,"body {\n  margin: 0;\n}\n",""]);const s=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var h=[].concat(t[u]);i&&a[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),o&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=o):h[4]="".concat(o)),e.push(h))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},a=[],s=0;s<t.length;s++){var c=t[s],u=i.base?c[0]+i.base:c[0],h=r[u]||0,l="".concat(u," ").concat(h);r[u]=h+1;var f=n(l),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)e[f].references++,e[f].updater(p);else{var g=o(p,i);i.byIndex=s,e.splice(s,0,{identifier:l,updater:g,references:1})}a.push(l)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var r=i(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var s=n(r[a]);e[s].references--}for(var c=i(t,o),u=0;u<r.length;u++){var h=n(r[u]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=c}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{var t,e,i;!function(t){t.Horizontal="horizontal",t.Vertical="vertical"}(t||(t={})),function(t){t.LTR="ltr",t.RTL="rtl"}(e||(e={})),function(t){t.Left="left",t.Right="right",t.Top="top",t.Bottom="bottom"}(i||(i={}));var o=new(function(){function t(){this._callbacks={}}return t.prototype.emit=function(t,e){var n=this._callbacks[t];if(n)for(var i=0,o=n;i<o.length;i++){var r=o[i];"function"==typeof r&&r(e)}},t.prototype.on=function(t,e){this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].indexOf(e)<0&&this._callbacks[t].push(e)},t.prototype.off=function(t,e){var n=this._callbacks[t];if(n){var i=n.indexOf(e);i>-1&&n.splice(i,1)}},t.prototype.destroy=function(){var t=this;Object.keys(this._callbacks).forEach((function(e){t._callbacks[e]=void 0})),this._callbacks={}},t}()),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},a=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout,s=function(){function t(){}return t.tick=function(t){return r(t)},t.stop=function(t){a(t)},t}(),c=new(function(){function t(){this._fps=60,this._frames=0,this._lastTs=Date.now(),this._isStarted=!1}return t.prototype.tick=function(){var t=this,e=Date.now();if(this._frames++,e>this._lastTs+20){var n=Math.round(1e3*this._frames/(e-this._lastTs));this._lastTs=e,this._frames=0,this._fps=n}this._isStarted&&s.tick((function(){return t.tick()}))},t.prototype.getFps=function(){return this._fps},t.prototype.start=function(){this._isStarted=!0,this.tick()},t.prototype.dispose=function(){this._isStarted=!1},t}());c.start();var u,h=function(){function t(){}return t.calcInsertion=function(t,e,n){var i=(e-t)/n;return new Array(n).fill(t).map((function(t,e){return parseFloat((t+i*e).toFixed(2))}))},t.calcLineLength=function(t,e,n,i){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))},t.calcCenterPoint=function(t,e,n,i){return{x:Math.min(t,n)+Math.abs(t-n)/2,y:Math.min(e,i)+Math.abs(e-i)/2}},t.calcFourPointsForImage=function(t,e,n,i){return{p0:[t,e],p1:[t+n,e],p2:[t+n,e+i],p3:[t,e+i]}},t.reflectTouchPointToImagePoint=function(t,e,n,i,o,r,a){void 0===a&&(a=1);var s=t-n,c=e-i;return{x:s,y:c,rx:s/(o*a),ry:c/(r*a)}},t.keepImageInCenter=function(t,e,n,i,o){return{x:t+n*(1-o),y:e+i*(1-o)}},t.toFixed=function(t,e){return void 0===e&&(e=6),parseFloat(t.toFixed(e))},t}(),l=function(){function t(t,e,n,i){this.cx=null,this.bx=null,this.ax=null,this.cy=null,this.by=null,this.ay=null,this.epsilon=1e-6,this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by}return t.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},t.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},t.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},t.prototype.solveCurveX=function(t){var e,n,i,o,r,a;for(i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<this.epsilon)return i;if(r=this.sampleCurveDerivativeX(i),Math.abs(r)<this.epsilon)break;i-=o/r}if((i=t)<(e=0))return e;if(i>(n=1))return n;for(;e<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<this.epsilon)return i;t>o?e=i:n=i,i=.5*(n-e)+e}return i},t.prototype.solve=function(t){return this.sampleCurveY(this.solveCurveX(t))},t}(),f=function(){function t(t,e,n,i,o){void 0===o&&(o=!1),this._bezier=null,this._fpsCompensate=!1,this._bezier=new l(t,e,n,i),this._fpsCompensate=o}return t.prototype.getPositionByTime=function(t){return this._bezier.solve(t)},t.prototype.createPositionsByStep=function(t,e,n){var i=this;return h.calcInsertion(0,1,n).map((function(t){return i.getPositionByTime(t)})).map((function(n){return t+(e-t)*n}))},t.prototype.tick=function(t,e,n,i){if(this._fpsCompensate){var o=Math.min(144,Math.max(c.getFps(),60))/60;n=Math.round(n*o)}var r=this.createPositionsByStep(t,e,n);r.push(e);var a=function(){r.length&&!i(r.shift(),!r.length)&&s.tick(a)};a()},t}(),p=function(){function t(){}return t.getScaleRatio=function(){var t;try{var e=document.createElement("canvas").getContext("2d"),n=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1);t=n>2?2:n}catch(e){t=1}return t},t}(),g=new f(.18,.83,.16,.99,!0),d=new f(.08,.94,.09,1,!0),m=new f(.14,.57,.47,.93,!1),v=p.getScaleRatio();!function(t){t.EnterDuoTouch="enter-double-touch",t.ImageLoadingFailure="image-loading-failure",t.LeaveDuoTouch="leave-double-touch",t.MouseWheel="mousewheel",t.ScrollingMode="scrolling-mode",t.Swipe="touch-swipe",t.TouchStart="touch-start",t.TouchMove="touch-move",t.TouchEnd="touch-end",t.TouchMoveX="touch-move-x",t.TouchMoveY="touch-move-y",t.Paging="paging",t.Resize="resize",t.Zooming="zooming",t.ZoomCenterMove="zoom-center-move"}(u||(u={}));var y=function(){function t(){}return t.setCanvasSize=function(t,e,n){t.width=e*v,t.height=n*v,t.style.width=e+"px",t.style.height=n+"px",t.getContext("2d").setTransform(v,0,0,v,0,0)},t.createCanvas=function(t,e){var n=document.createElement("canvas");return this.setCanvasSize(n,t,e),n},t}(),b=function(){function t(){}return t.sleep=function(t){return new Promise((function(e){setTimeout(e,t)}))},t}(),w=null,_=function(){function t(){}return t.nextTick=function(t){Promise.resolve().then((function(){"function"==typeof t&&t()}))},t.nextJob=function(t){return clearTimeout(w),w=setTimeout((function(){"function"==typeof t&&t()}),1)},t}(),I=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))},P=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},x=new Image;x.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMjHxIGmVAAAAEklEQVQYV2P4//8/Bqa+4H8GAHjDSrb71GS0AAAAAElFTkSuQmCC";var S=function(){function e(t){this.stage=null,this.image=x,this.inLoading=!1,this.isLoaded=!1,this._rawX=0,this._x=null,this._rawY=0,this._y=0,this.originalWidth=0,this.originalHeight=0,this.stage=t.stage,this.url=t.url}return Object.defineProperty(e.prototype,"placeholder",{get:function(){return this.stage.option.placeholder||x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),e.prototype.updatePosition=function(e,n){e&&(this._rawX=e.x*v,this._rawY=e.y*v,null===this.x&&(this._x=this._rawX),null===this.y&&(this._y=this._rawY),n||this.stage.scrollingMode===t.Vertical&&!this.stage.inSetScrollingMode||!this.isLoaded?(this._x=this._rawX,this._y=this._rawY):this.tickPosition())},Object.defineProperty(e.prototype,"size",{get:function(){var t=this.stage.option,e=t.minWidth,n=t.maxWidth,i=t.minHeight,o=t.maxHeight,r=n(),a=o(),s=e(),c=i(),u=this.isLoaded?this.originalWidth/this.originalHeight:this.placeholder.width/this.placeholder.height,h=this.isLoaded?this.originalWidth:this.placeholder.width;r>0&&h>r&&(h=r),s>0&&h<s&&(h=s);var l=h/u;return a>0&&l>a&&(l=a),c>0&&l<c&&(l=c),{width:h=l*u,height:l}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positionX",{get:function(){return(this.stage.canvasRect.width-this.size.width)/2*v},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"positionY",{get:function(){return(this.stage.canvasRect.height-this.size.height)/2*v},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.stage.stageImages.indexOf(this)},enumerable:!1,configurable:!0}),e.prototype.tickPosition=function(){var t=this,e=this._x,n=this._rawX,i=g.createPositionsByStep(e,n,30),o=this._y,r=this._rawY,a=g.createPositionsByStep(o,r,30),c=function(){t._x=i.shift(),t._y=a.shift(),(i.length||a.length)&&s.tick((function(){return c()}))};c()},e.prototype.load=function(){var t=this;return new Promise((function(e,n){return I(t,void 0,void 0,(function(){var t,i,o,r,a,s=this;return P(this,(function(c){switch(c.label){case 0:if(this.isLoaded||this.inLoading)return[3,5];if(this.inLoading=!0,t=setTimeout((function(){n(new Error("Image loading timeout"))}),this.stage.option.imageTimeout),i=new Image,"function"!=typeof(o=this.stage.option.beforeImageLoad))return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),r=this,[4,o(this.url)];case 2:return r.url=c.sent(),[3,4];case 3:return a=c.sent(),[2,n(a)];case 4:return i.onload=function(){return I(s,void 0,void 0,(function(){return P(this,(function(n){return clearTimeout(t),this.originalWidth=i.width,this.originalHeight=i.height,this.inLoading=!1,this.isLoaded=!0,this.image=i,e(),[2]}))}))},i.onerror=function(e){clearTimeout(t),s.inLoading=!1,n(e)},i.src=this.url,[3,6];case 5:e(),c.label=6;case 6:return[2]}}))}))}))},e.prototype.reload=function(){return this.isLoaded=!1,this.load()},e.prototype.destroy=function(){this.stage=null},e}(),T=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))},M=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},C=function(){function e(t){this.stage=null,this.stageImages=[],this.stage=t}return e.prototype.addImage=function(t){var e=new S({url:t,stage:this.stage});return this.stageImages.push(e),this.stageImages.length-1},e.prototype.prependImage=function(t){var e=new S({url:t,stage:this.stage});return this.stageImages=[e].concat(this.stageImages),0},e.prototype.removeImage=function(t){this.stageImages.splice(t,1)},e.prototype.autoLoadImages=function(e){return T(this,void 0,void 0,(function(){var n,i,r,a,s;return M(this,(function(c){switch(c.label){case 0:n=this.stage.currentPageIndex,this.stage.scrollingMode,t.Vertical,i=n,r=n+e,c.label=1;case 1:if(!(i<r))return[3,6];if(!(a=this.stageImages[i]))return[3,5];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.load()];case 3:return c.sent(),[3,5];case 4:return s=c.sent(),console.error("[Muso] Failed to load image ".concat(a.url,":"),s),o.emit(u.ImageLoadingFailure,this),[3,5];case 5:return i++,[3,1];case 6:return[2]}}))}))},e.prototype.loadImage=function(t){return T(this,void 0,void 0,(function(){var e,n;return M(this,(function(i){switch(i.label){case 0:if(t<0||t>=this.stageImages.length)return[2];if(!(e=this.stageImages[t]))return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.load()];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),console.error("[Muso] Failed to load image ".concat(e.url,":"),n),o.emit(u.ImageLoadingFailure,this),[3,4];case 4:return[2]}}))}))},e.prototype.destroy=function(){this.stage=null,this.stageImages.forEach((function(t){return t.destroy()})),this.stageImages=[]},e}(),k=function(){function e(t){this.stage=null,this.enabled=!1,this.stage=t,this.onResize=this.onResize.bind(this),window.addEventListener("resize",this.onResize)}return e.prototype.onResize=function(e){return n=this,i=void 0,a=function(){return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(n){switch(n.label){case 0:return this.enabled?(this.stage.setCanvasSize(),[4,this.stage.updateAllImagesPosition()]):[3,2];case 1:n.sent(),this.stage.scrollingMode===t.Vertical&&this.stage.setVerticalQueueOffsetByPage(),o.emit(u.Resize,e),n.label=2;case 2:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,e){function o(t){try{c(a.next(t))}catch(t){e(t)}}function s(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,s)}c((a=a.apply(n,i||[])).next())}));var n,i,r,a},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.destroy=function(){window.removeEventListener(u.Resize,this.onResize),this.onResize=null},e}(),O=function(){function n(t){this.stage=null,this.touchId=0,this.currentTouchId=0,this.touchStartTs=null,this.touchList=null,this.touchDirectionX=null,this.touchDirectionY=null,this.p1={x:null,y:null,startX:null,startY:null,ts:0},this.p2={x:null,y:null,startX:null,startY:null,ts:0},this._touchMoveX=0,this._touchMoveY=0,this.touchSpeedX={value:0,touchId:null},this.touchSpeedY={value:0,touchId:null},this.startRawScale=null,this._rawScale=1,this.stopScaleTicking=!1,this.stopScaleTickingTimer=null,this.centerX=0,this.centerY=0,this.startCenterX=null,this.startCenterY=null,this.lastCenterX=null,this.lastCenterY=null,this._rawCenterX=0,this._rawCenterY=0,this.holds=!1,this.stage=t,t.option.noDefaultControl||(this.initTouchEvents(),this.initStageControl())}return Object.defineProperty(n.prototype,"stageCanvas",{get:function(){return this.stage.canvas},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stageOption",{get:function(){return this.stage.option},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inTouch",{get:function(){return this.touchList&&this.touchList.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"touchPointCount",{get:function(){return this.touchList?this.touchList.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDuoTouch",{get:function(){return 2===this.touchPointCount},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"p1DeltaX",{get:function(){return null===this.p1.x?0:this.p1.x-this.p1.startX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"p1DeltaY",{get:function(){return null===this.p1.y?0:this.p1.y-this.p1.startY},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"p2DeltaX",{get:function(){return null===this.p2.x?0:this.p2.x-this.p2.startX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"p2DeltaY",{get:function(){return null===this.p2.y?0:this.p2.y-this.p2.startY},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"touchMoveX",{get:function(){return this._touchMoveX},set:function(t){if(this._touchMoveX=t,this.inTouch&&(this.touchDirectionX=t>this._touchMoveX?i.Right:i.Left),o.emit(u.TouchMoveX,t),!this.isDuoTouch&&this.isHorizontalMode&&(1===this.stage.displayScale&&(this.stage.touchMoveX=t),this.stage.displayScale>1&&this.currentTouchId===this.touchId)){var e=this.lastCenterX+-t*(1/this.stage.displayScale)*v*this.stageOption.zoomTouchMoveAcc;e>0&&e<this.stage.canvasLogicWidth&&(this.rawCenterX=e)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"touchMoveY",{get:function(){return this._touchMoveY},set:function(t){if(this.inTouch&&(this.touchDirectionY=t>this._touchMoveY?i.Bottom:i.Top),this._touchMoveY=t,o.emit(u.TouchMoveY,t),!this.isDuoTouch&&this.isHorizontalMode&&(1===this.stage.displayScale&&(this.stage.touchMoveY=t),this.stage.displayScale>1&&this.currentTouchId===this.touchId)){var e=this.lastCenterY+-t*(1/this.stage.displayScale)*v*this.stageOption.zoomTouchMoveAcc;e>0&&e<this.stage.canvasLogicHeight&&(this.rawCenterY=e)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rawScale",{get:function(){return this._rawScale},set:function(t){var e=this;this._rawScale=t;var n=this.stage;d.tick(n.displayScale,t,50,(function(t){if(e.stopScaleTicking)return e.resetStopScaleTicking(),!0;n.displayScale=t,o.emit(u.Zooming,t)}))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isHorizontalMode",{get:function(){return this.stageOption.scrollingMode===t.Horizontal},enumerable:!1,configurable:!0}),n.prototype.resetStopScaleTicking=function(){var t=this;clearTimeout(this.stopScaleTickingTimer),this.stopScaleTickingTimer=setTimeout((function(){t.stopScaleTicking=!1}),10)},Object.defineProperty(n.prototype,"centerDeltaX",{get:function(){return this.rawCenterX-this.startCenterX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"centerDeltaY",{get:function(){return this.rawCenterY-this.startCenterY},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rawCenterX",{get:function(){return this._rawCenterX},set:function(t){var e=this;this._rawCenterX=t,g.tick(this.centerX,t,20,(function(t){e.centerX=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rawCenterY",{get:function(){return this._rawCenterY},set:function(t){var e=this;this._rawCenterY=t,g.tick(this.centerY,t,20,(function(t){e.centerY=t}))},enumerable:!1,configurable:!0}),n.prototype.onTouchStart=function(t){if(t.preventDefault(),this.stage.isTouchDisabled)this.holds=!0;else{if(this.touchList=t.touches,null===this.touchStartTs&&(this.touchStartTs=Date.now()),this.touchPointCount>0){var e=t.touches[0];if(this.p1.startX=e.clientX,this.p1.startY=e.clientY,this.p1.ts=Date.now(),2===this.touchPointCount){var n=t.touches[1];this.p2.startX=n.clientX,this.p2.startY=n.clientY,this.p2.ts=Date.now(),null===this.startRawScale&&(this.startRawScale=this.rawScale),o.emit(u.EnterDuoTouch,t)}}this.currentTouchId=this.touchId,o.emit(u.TouchStart,t)}},n.prototype.onTouchMove=function(t){if(t.preventDefault(),!this.stage.isTouchDisabled&&!this.holds){var e=t.touches[0];if(this.p1.x=e.clientX,this.p1.y=e.clientY,Math.abs(this.p1DeltaX)>10&&(this.touchMoveX=this.p1DeltaX),Math.abs(this.p1DeltaY)>10&&(this.touchMoveY=this.p1DeltaY),this.isDuoTouch&&this.isHorizontalMode){var n=t.touches[1];this.p2.x=n.clientX,this.p2.y=n.clientY;var i=h.calcCenterPoint(e.clientX,e.clientY,n.clientX,n.clientY),r=i.x,a=i.y;null===this.startCenterX&&(this.startCenterX=r),null===this.startCenterY&&(this.startCenterY=a),this.rawCenterX=r,this.rawCenterY=a;var s=h.calcLineLength(e.clientX,e.clientY,n.clientX,n.clientY)/h.calcLineLength(this.p1.startX,this.p1.startY,this.p2.startX,this.p2.startY),c=this.startRawScale*s;c<.3?c=.3:c>5&&(c=5),Math.abs(c-this.rawScale)>.1&&(this.rawScale=c),o.emit(u.ZoomCenterMove,{position:[this.centerX,this.centerY],delta:[this.centerDeltaX,this.centerDeltaY]})}o.emit(u.TouchMove,t)}},n.prototype.onTouchEnd=function(t){if(t.preventDefault(),!this.stage.isTouchDisabled){this.holds&&(this.holds=!1),this.touchList=t.touches;var e=Date.now()-this.touchStartTs;this.touchSpeedX.value=(this.p1.x-this.p1.startX)/e,this.touchSpeedY.value=(this.p1.y-this.p1.startY)/e,this.touchSpeedX.touchId=this.touchId,this.touchSpeedY.touchId=this.touchId,this.startCenterX=null,this.startCenterY=null,this.lastCenterX=this.centerX,this.lastCenterY=this.centerY,this.startRawScale=null,this.touchStartTs=null,this.touchId++,this.isDuoTouch||o.emit(u.LeaveDuoTouch,t),this.inTouch||o.emit(u.TouchEnd,t),this.p1.x=null,this.p1.startX=null,this.p1.y=null,this.p1.startY=null,this.p2.x=null,this.p2.startX=null,this.p2.y=null,this.p2.startY=null}},n.prototype.onMouseWheel=function(t){return e=this,n=void 0,r=function(){return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){return this.isHorizontalMode||o.emit(u.MouseWheel,-t.deltaY),[2]}))},new((i=void 0)||(i=Promise))((function(t,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(a,s)}c((r=r.apply(e,n||[])).next())}));var e,n,i,r},n.prototype.initTouchEvents=function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseWheel=this.onMouseWheel.bind(this);var t=this.stageCanvas;t.addEventListener("touchstart",this.onTouchStart),t.addEventListener("touchmove",this.onTouchMove),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchcancel",this.onTouchEnd),t.addEventListener("mousewheel",this.onMouseWheel)},n.prototype.initStageControl=function(){var t=this,n=this,r=this.stage,a=r.option.restoreScaleRate;o.on(u.Swipe,(function(n){if(t.isHorizontalMode){var o=r.option.horizontalDirection===e.RTL;switch(n){case i.Right:o?r.goNextPage():r.goPrevPage();break;case i.Left:o?r.goPrevPage():r.goNextPage()}}}));var s=null,c=0,h=null,l=function(e){if(!t.isHorizontalMode){var n=e.deltaY,i=e.lastQueueOffsetForVertical,o=e.newQueueOffsetY;if(o>0){var a=.5*o;return t.stage.queueOffsetForVertical=a,g.tick(a,0,30,(function(e,n){t.inTouch||(t.stage.queueOffsetForVertical=e)}))}if(o-i<0){var s=r.getImagesHeightByRange(0,r.stageImages.length-1)-r.canvasLogicHeight,c=i+.5*n;if(Math.abs(c)>s)return t.stage.queueOffsetForVertical=c,g.tick(c,-s,30,(function(e,n){t.inTouch||(t.stage.queueOffsetForVertical=e)}));if(Math.abs(o)>s)return void(t.stage.queueOffsetForVertical=-s)}t.stage.queueOffsetForVertical=o,t.stage.syncPageByVerticalQueueOffset(),null===h&&(h=Date.now())}};function f(){g.tick(n.touchMoveX,0,30,(function(t,e){n.inTouch||(n.touchMoveX=t,e)})),g.tick(n.touchMoveY,0,30,(function(t,e){n.touchMoveY=t,e}))}o.on(u.TouchMoveY,(function(e){t.isHorizontalMode||(null===s&&(s=t.stage.queueOffsetForVertical),c=s+e*t.stage.option.vTouchMoveAcc,l({deltaY:e,newQueueOffsetY:c,lastQueueOffsetForVertical:s}))})),o.on(u.MouseWheel,(function(e){if(!t.isHorizontalMode){var n=t.stage.queueOffsetForVertical,i=t.stage.queueOffsetForVertical+e*t.stage.option.vTouchMoveAcc;l({deltaY:e,newQueueOffsetY:i,lastQueueOffsetForVertical:n})}})),o.on(u.TouchEnd,(function(){if(!t.isHorizontalMode){var e=c<s;return o.emit(u.Swipe,e?i.Top:i.Bottom),s=null,void(c=0)}var h=t.stage.displayScale;if(1===h){var l=t.stageOption.swipeDistanceOfPaging;t.p1DeltaX<0&&-1*t.p1DeltaX>l?o.emit(u.Swipe,i.Left):t.p1DeltaX>l&&o.emit(u.Swipe,i.Right),f()}else h<a&&(t.stopScaleTicking=!0,g.tick(r.displayScale,1,30,(function(t,e){r.displayScale=t,n._rawScale=t})),f(),g.tick(n.rawCenterX,r.canvasLogicWidth/2,30,(function(t){n.rawCenterX=t})),g.tick(n.rawCenterY,r.canvasLogicHeight/2,30,(function(t){n.rawCenterY=t})))})),o.on(u.Swipe,(function(e){if(e===i.Bottom||e===i.Top){var n=Date.now()-h;if(n>220)h=null;else{var o=t.touchId,a=c-s,u=t.p1DeltaY/n,l=c+a*Math.abs(u)*v,f=r.stageImages.length;m.tick(c,l,100,(function(n){if(t.inTouch||o!==t.touchId||r.inSetScrollingMode)return!0;if(n>0)return t.stage.queueOffsetForVertical=0,t.stage.syncPageByVerticalQueueOffset(),!0;var a=r.currentPageIndex>=f-1;if(e===i.Top&&a){var s=r.getImagesHeightByRange(0,r.stageImages.length-1)-r.canvasLogicHeight;if(Math.abs(n)>s)return t.stage.queueOffsetForVertical=-s,t.stage.syncPageByVerticalQueueOffset(),!0}t.stage.queueOffsetForVertical=n,t.stage.syncPageByVerticalQueueOffset()})),h=null}}}))},n.prototype.destroy=function(){var t=this.stageCanvas;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchEnd),t.removeEventListener("scroll",this.onMouseWheel),this.stage=null},n}(),z=function(){function t(){this._rafId=null,this._isEnabled=!1,this._callbacks=[]}return t.prototype._execCallbacks=function(){for(var t=0,e=this._callbacks;t<e.length;t++){var n=e[t];"function"==typeof n&&n()}},t.prototype._tick=function(){var t=this;this._execCallbacks(),this._isEnabled&&(this._rafId=s.tick((function(){return t._tick()})))},t.prototype.start=function(){this._isEnabled=!0,this._tick()},t.prototype.stop=function(){this._isEnabled=!1},t.prototype.on=function(t){this._callbacks.indexOf(t)<0&&this._callbacks.push(t)},t.prototype.off=function(t){var e=this._callbacks.indexOf(t);e>-1&&this._callbacks.splice(e,1)},t.prototype.destroy=function(){this.stop(),this._callbacks=[]},t}(),L=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))},A=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Y=function(){function n(t,e,n){this.option=null,this._canvas=null,this._context=null,this.muso=null,this.originalPlaceHolder=null,this.stopDrawing=!1,this.resizer=new k(this),this.stageIO=new C(this),this.currentPageIndex=0,this.inPaging=!1,this.pagingTimer=null,this.inSetScrollingMode=!1,this.displayScale=1,this.imageX=0,this.imageY=0,this.imageWidth=0,this.imageHeight=0,this.queueOffsetForHorizontal=0,this.queueOffsetForVertical=0,this.ticker=null,this.swiper=null,this.touchMoveX=0,this.touchMoveY=0,this.isTouchDisabled=!1,this.muso=t,this.option=e,this.originalPlaceHolder=e.placeholder,this.initCanvas(n),this.initPlaceHolder(),this.setCanvasSize(),this.initSwiper(),this.initTicker()}return Object.defineProperty(n.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasLogicWidth",{get:function(){return this.canvas.width/v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasLogicHeight",{get:function(){return this.canvas.height/v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasRect",{get:function(){return this.canvas.parentElement.getBoundingClientRect()},enumerable:!1,configurable:!0}),n.prototype.setCanvasSize=function(){var t=this._canvas,e=this.canvasRect,n=e.width,i=e.height;t.width=n*v,t.height=i*v,t.style.width=n+"px",t.style.height=i+"px"},n.prototype.enableResizing=function(){this.resizer.enable()},n.prototype.disableResizing=function(){this.resizer.disable()},Object.defineProperty(n.prototype,"stageImages",{get:function(){return this.stageIO.stageImages},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentImage",{get:function(){return this.stageImages[this.currentPageIndex]},enumerable:!1,configurable:!0}),n.prototype.autoLoadImages=function(){return L(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.stageIO.autoLoadImages(4)];case 1:return[2,t.sent()]}}))}))},n.prototype.addImage=function(t){var e=this,n=this.stageIO.addImage(t);return n<this.currentPageIndex+this.option.renderingImageCount&&this.stageIO.loadImage(n).then((function(){e.updateAllImagesPosition({noBezier:!0})})),n},n.prototype.prependImage=function(e){var n=this,i=this.stageIO.prependImage(e);return this.currentPageIndex++,this.currentPageIndex-i<this.option.renderingImageCount&&this.stageIO.loadImage(i).then((function(){n.scrollingMode===t.Vertical&&n.setVerticalQueueOffsetByPage({noBezier:!0}),_.nextJob((function(){n.updateAllImagesPosition({noBezier:!0})}))})),i},n.prototype.removeImage=function(t){this.stageIO.removeImage(t),this.updateAllImagesPosition()},n.prototype.reload=function(t){var e=this.stageImages[t];e&&e.reload()},Object.defineProperty(n.prototype,"scrollingMode",{get:function(){return this.option.scrollingMode},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isHorizontalRTL",{get:function(){return this.option.horizontalDirection===e.RTL},enumerable:!1,configurable:!0}),n.prototype.goPrevPage=function(){this.goTargetPage(this.currentPageIndex-1)},n.prototype.goNextPage=function(){this.goTargetPage(this.currentPageIndex+1)},n.prototype.goTargetPage=function(e){return L(this,void 0,void 0,(function(){var n=this;return A(this,(function(i){switch(i.label){case 0:return e>-1&&e<this.stageImages.length?(this.inPaging=!0,this.currentPageIndex=e,o.emit(u.Paging,this.currentPageIndex),this.setQueueOffset(),[4,this.autoLoadImages()]):[3,3];case 1:return i.sent(),[4,this.updateAllImagesPosition()];case 2:i.sent(),this.scrollingMode===t.Vertical&&this.setVerticalQueueOffsetByPage(),clearTimeout(this.pagingTimer),this.pagingTimer=setTimeout((function(){n.inPaging=!1}),500),i.label=3;case 3:return[2]}}))}))},n.prototype.syncPageByVerticalQueueOffset=function(){return L(this,void 0,void 0,(function(){var e,n,i,r;return A(this,(function(a){switch(a.label){case 0:if(this.scrollingMode!==t.Vertical)return[2];for(e=0,n=0,i=this.stageImages.length;n<i&&!(e>this.currentPageIndex+this.option.renderingImageCount);n++)(r=this.stageImages[n])&&r.y/v+this.queueOffsetForVertical<.8*this.canvasLogicHeight&&n>e&&(e=n);return this.currentPageIndex=e,[4,this.autoLoadImages()];case 1:return a.sent(),[4,this.updateAllImagesPosition()];case 2:return a.sent(),o.emit(u.Paging,this.currentPageIndex),[2]}}))}))},n.prototype.setHorizontalDirection=function(t){return L(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return this.option.horizontalDirection=t,[4,this.updateAllImagesPosition()];case 1:return e.sent(),[2]}}))}))},n.prototype.setScrollingMode=function(e){return L(this,void 0,void 0,(function(){var n=this;return A(this,(function(i){switch(i.label){case 0:return this.inSetScrollingMode||this.scrollingMode===e||this.inPaging?[2]:(this.inSetScrollingMode=!0,this.option.scrollingMode=e,[4,this.updateAllImagesPosition()]);case 1:return i.sent(),e!==t.Vertical?[3,3]:[4,b.sleep(500)];case 2:i.sent(),i.label=3;case 3:return this.setQueueOffset(),[4,this.autoLoadImages()];case 4:return i.sent(),[4,this.updateAllImagesPosition()];case 5:return i.sent(),o.emit(u.Paging,this.currentPageIndex),o.emit(u.ScrollingMode,e),this.inSetScrollingMode=!1,setTimeout((function(){return n.updateAllImagesPosition()}),1),[2]}}))}))},Object.defineProperty(n.prototype,"imageLogicalWidth",{get:function(){return this.currentImage.size.width*this.displayScale},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"imageLogicalHeight",{get:function(){return this.currentImage.size.height*this.displayScale},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"zoomCenterX",{get:function(){return this.swiper.centerX},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"zoomCenterY",{get:function(){return this.swiper.centerY},enumerable:!1,configurable:!0}),n.prototype.calcPositionData=function(){return L(this,void 0,void 0,(function(){var e,n,i,o,r,a,s;return A(this,(function(c){if(e=[],!(n=this.stageImages).length)return[2,e];for(i=0,o=this.stageImages.length;i<o;i++){switch(r=n[i],a=0,s=0,this.scrollingMode){case t.Horizontal:this.isHorizontalRTL?(a-=r.size.width,a-=this.getImagesWidthBefore(i)):a=this.getImagesWidthBefore(i);break;case t.Vertical:s+=this.getImagesHeightBefore(i)}e.push({x:a,y:s})}return[2,e]}))}))},n.prototype.setQueueOffset=function(e){void 0===e&&(e={});var n=e.noBezier;this.scrollingMode===t.Horizontal&&(this.setHorizontalQueueOffsetByPage({noBezier:n}),this.setVerticalQueueOffsetByPage({noBezier:n}))},n.prototype.setHorizontalQueueOffsetByPage=function(t){var e=this;void 0===t&&(t={});var n=t.noBezier,i=0;this.isHorizontalRTL?(i=this.getImagesWidthBefore(this.currentPageIndex+1),i+=this.currentImage.positionX/v):i=this.getImagesWidthBefore(this.currentPageIndex),n?this.queueOffsetForHorizontal=i:g.tick(this.queueOffsetForHorizontal,i,30,(function(t){e.queueOffsetForHorizontal=t}))},n.prototype.setVerticalQueueOffsetByPage=function(t){var e=this;void 0===t&&(t={});var n=t.noBezier,i=-this.getImagesHeightBefore(this.currentPageIndex);n?this.queueOffsetForVertical=i:g.tick(this.queueOffsetForVertical,i,30,(function(t){e.queueOffsetForVertical=t}))},n.prototype.updateAllImagesPosition=function(t){return void 0===t&&(t={}),L(this,void 0,void 0,(function(){var e,n,i,o,r,a;return A(this,(function(s){switch(s.label){case 0:return e=t.noBezier,[4,this.calcPositionData()];case 1:for(n=s.sent(),i=0,o=this.stageImages.length;i<o;i++)r=this.stageImages[i],a=n[i],r&&a&&r.updatePosition(a,e);return this.setQueueOffset({noBezier:e}),[2]}}))}))},n.prototype.getImagesWidthBefore=function(t){return this.getImagesWidthByRange(0,t-1)},n.prototype.getImagesHeightBefore=function(t){return this.getImagesHeightByRange(0,t-1)},n.prototype.getImagesWidthByRange=function(t,e){for(var n=0,i=t;i<=e;i++)n+=this.stageImages[i].size.width;return n},n.prototype.getImagesHeightByRange=function(t,e){for(var n=0,i=t;i<=e;i++)n+=this.stageImages[i].size.height;return n},n.prototype.initCanvas=function(t){this._canvas=t,this._context=t.getContext("2d");var e=this.canvasRect,n=e.width,i=e.height;y.setCanvasSize(t,n,i),t.className="muso-stage",t.style.padding=this.option.stagePadding+"px",t.style.backgroundColor=this.option.stageColor,t.style.boxSizing="border-box"},n.prototype.initPlaceHolder=function(){var t=this.originalPlaceHolder;if(t){var e=y.createCanvas(this.canvasLogicWidth,this.canvasLogicHeight),n=e.getContext("2d");this.option.stageColor&&(n.fillStyle=this.option.stageColor,n.fillRect(0,0,e.width,e.height));var i=(this.canvasLogicWidth-t.width)/2,o=(this.canvasLogicHeight-t.height)/2;n.drawImage(t,i,o),this.option.placeholder=e}},n.prototype.initTicker=function(){var t=this,e=new z;e.on((function(){t.stopDrawing||(t.clearStage(),t.drawImages())})),e.start(),this.ticker=e},n.prototype.clearStage=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height)},n.prototype.drawImages=function(){for(var t=0,e=this.stageImages.length;t<e;t++)t!==this.currentPageIndex&&this.drawSingleImage({index:t,alpha:this.option.otherPageAlpha()});this.drawSingleImage({index:this.currentPageIndex,alpha:1,isCurrentImage:!0,scale:this.displayScale})},n.prototype.drawSingleImage=function(e){e.scale=e.scale||1;var n=this.stageImages[e.index];if(n){this.context.globalAlpha=e.alpha;var i=n.x,o=n.y,r=n.size.width*v*e.scale,a=n.size.height*v*e.scale;switch(this.scrollingMode){case t.Horizontal:var s=this.isHorizontalRTL?0:this.currentImage.positionX;i+=this.queueOffsetForHorizontal*v*(this.isHorizontalRTL?1:-1),i+=this.touchMoveX*v+s,o+=(this.canvasLogicHeight-n.size.height)/2*v;break;case t.Vertical:o+=this.queueOffsetForVertical*v,i+=(this.canvasLogicWidth-n.size.width)/2*v}if(e.isCurrentImage&&1!==this.displayScale){i+=n.size.width*(1-this.displayScale),o+=n.size.height*(1-this.displayScale);var c=this.zoomCenterX-this.canvasLogicWidth/2,u=this.zoomCenterY-this.canvasLogicHeight/2,h=this.displayScale-1;i+=-c*h*v,o+=-u*h*v}this.imageX=i,this.imageY=o,this.imageWidth=r,this.imageHeight=a,this._context.drawImage(n.isLoaded?n.image:n.placeholder,Math.floor(i),Math.floor(o),Math.floor(r),Math.floor(a)),this.context.globalAlpha=1}},Object.defineProperty(n.prototype,"touchPointCount",{get:function(){return this.swiper.touchPointCount},enumerable:!1,configurable:!0}),n.prototype.initSwiper=function(){this.swiper=new O(this)},n.prototype.destroy=function(){this.resizer.destroy(),this.stageIO.destroy(),this.swiper.destroy(),this.ticker.stop();var t=this._canvas;t.parentElement.removeChild(t)},n}(),X=function(){function n(n){void 0===n&&(n={});var i=this;this.option=Object.create(null),this.stage=null,this.option.autoResizing="boolean"!=typeof n.autoResizing||n.autoResizing,this.option.stagePadding=n.stagePadding||0,this.option.stageColor=n.stageColor||"#222",this.option.swipeDistanceOfPaging=n.swipeDistanceOfPaging||50,this.option.renderingImageCount=n.renderingImageCount||5,this.option.horizontalDirection=n.horizontalDirection||e.LTR,this.option.maxWidth=n.maxWidth||function(){var t;return null!==(t=i.stage.canvas.offsetWidth)&&void 0!==t?t:0},this.option.minWidth=n.minWidth||function(){return 0},this.option.maxHeight=n.maxHeight||function(){var t;return null!==(t=i.stage.canvas.offsetHeight)&&void 0!==t?t:0},this.option.minHeight=n.minHeight||function(){return 0},this.option.restoreScaleRate=n.restoreScaleRate||1.3,this.option.scrollingMode=n.scrollingMode||t.Horizontal,this.option.noDefaultControl=n.noDefaultControl||!1,this.option.beforeImageLoad=n.beforeImageLoad||null,this.option.vTouchMoveAcc=n.vTouchMoveAcc||1.35,this.option.zoomTouchMoveAcc=n.zoomTouchMoveAcc||1.05,this.option.placeholder=n.placeholder||null,this.option.imageTimeout=n.imageTimeout||5e3,this.option.otherPageAlpha=n.otherPageAlpha||function(){return 1}}return Object.defineProperty(n.prototype,"swiper",{get:function(){return this.stage.swiper},enumerable:!1,configurable:!0}),n.prototype.mount=function(t){var e=new Y(this,this.option,t);this.option.autoResizing&&e.enableResizing(),this.stage=e},n.prototype.destroy=function(){o.destroy(),this.stage.destroy(),this.stage=null,this.option=null},n.prototype.setScrollingMode=function(t){this.stage.setScrollingMode(t)},n.prototype.addImage=function(t){return this.stage.addImage(t)},n.prototype.prependImage=function(t){return this.stage.prependImage(t)},n.prototype.removeImage=function(t){this.stage.removeImage(t)},n.prototype.reload=function(t){this.stage.reload(t)},n.prototype.goPrevPage=function(){this.stage.goPrevPage()},n.prototype.goNextPage=function(){this.stage.goNextPage()},n.prototype.goTargetPage=function(t){this.stage.goTargetPage(t)},n.prototype.setHorizontalDirection=function(t){return this.stage.setHorizontalDirection(t)},n.prototype.on=function(t,e){o.on(t,e)},n.prototype.off=function(t,e){o.off(t,e)},n}(),H=n(379),R=n.n(H),D=n(795),E=n.n(D),B=n(569),F=n.n(B),j=n(565),V=n.n(j),W=n(216),q=n.n(W),Q=n(589),N=n.n(Q),Z=n(590),G={};G.styleTagTransform=N(),G.setAttributes=V(),G.insert=F().bind(null,"head"),G.domAPI=E(),G.insertStyleElement=q(),R()(Z.Z,G),Z.Z&&Z.Z.locals&&Z.Z.locals;var U,J,K=["https://cdn.discordapp.com/attachments/1022482470068826162/1101171634729127936/LancerComet_Many_coins_popped_out_from_two_girls_bilibili_22_33_0deda81d-53c9-4c0a-95cf-a3c0440bd2f5.png","https://cdn.discordapp.com/attachments/1022482470068826162/1098518866369450004/LancerComet_Many_coins_popped_out_from_two_girls_bilibili_22_33_d6e038e5-57d2-48fd-bf79-c11b976b6199.png","https://cdn.discordapp.com/attachments/1022482470068826162/1098518869586477138/LancerComet_Many_coins_popped_out_from_two_girls_bilibili_22_33_c8554f08-40e8-44a8-9911-d845ba000133.png","https://cdn.discordapp.com/attachments/1022482470068826162/1089860274514829372/LancerComet_a_catgirl_walking_on_the_street_in_traditional_chin_c7b84bbb-9ef8-463a-ade2-9b06a71a82fc.png","https://cdn.discordapp.com/attachments/1022482470068826162/1101172129497632879/LancerComet_an_image_that_presents_the_file_caching_black_and_w_49c20d40-32a9-45ad-9b2a-f1ace655f697.png","https://cdn.discordapp.com/attachments/1022482470068826162/1101174246899712104/LancerComet_a_picture_of_city_scene_black_and_white_japanese_ma_770bf965-74a3-4dff-818c-e390bafa5662.png","https://cdn.discordapp.com/attachments/1022482470068826162/1098152458846470165/LancerComet_an_image_that_presents_the_file_caching_black_and_w_567e0751-ae9d-4b5e-9dd0-fa1df570f301.png","https://cdn.discordapp.com/attachments/1022482470068826162/1098152018801078313/LancerComet_an_image_that_presents_the_file_caching_d2ede472-b362-495c-a52a-f72ca28be29d.png"];J=function(){var n,i,o,r;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(t){var e=new Image;e.onload=function(){return t(e)},e.src="logo.png"}))];case 1:return n=a.sent(),i=t.Horizontal,(o=new X({scrollingMode:i,renderingImageCount:5,stageColor:"#111",placeholder:n,otherPageAlpha:function(){return i===t.Vertical?1:.3}})).on(u.TouchStart,(function(){console.log("Touch start")})),o.on(u.Swipe,(function(t){console.log("Swipe:",t)})),o.on(u.ScrollingMode,(function(t){console.log("Scrolling mode changed:",t),i=t})),o.on(u.Paging,(function(t){console.log("Paging:",t)})),o.on(u.ImageLoadingFailure,(function(t){console.error("Image load failure:",t)})),r=document.querySelector("#muso"),o.mount(r),K.forEach((function(t){return o.addImage(t)})),document.getElementById("prev-btn").addEventListener("click",(function(){return o.goPrevPage()})),document.getElementById("next-btn").addEventListener("click",(function(){return o.goNextPage()})),document.getElementById("rtl-btn").addEventListener("click",(function(){o.setScrollingMode(t.Horizontal),o.setHorizontalDirection(e.RTL)})),document.getElementById("ltr-btn").addEventListener("click",(function(){o.setScrollingMode(t.Horizontal),o.setHorizontalDirection(e.LTR)})),document.getElementById("vertical-btn").addEventListener("click",(function(){o.setScrollingMode(t.Vertical)})),window.addEventListener("keyup",(function(t){var e=t.key;"ArrowLeft"===e?o.goPrevPage():"ArrowRight"===e&&o.goNextPage()})),[2]}}))},new((U=void 0)||(U=Promise))((function(t,e){function n(t){try{o(J.next(t))}catch(t){e(t)}}function i(t){try{o(J.throw(t))}catch(t){e(t)}}function o(e){var o;e.done?t(e.value):(o=e.value,o instanceof U?o:new U((function(t){t(o)}))).then(n,i)}o((J=J.apply(void 0,[])).next())}))})()})();